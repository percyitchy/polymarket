# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –ø–µ—Ä–µ—Å—á—ë—Ç–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π

## üîç –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º—ã

### –¢–µ–∫—É—â–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:
- **–ö–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–æ**: —Ç–æ–ª—å–∫–æ 0.99% —Ä—ã–Ω–∫–æ–≤ (345 –∏–∑ 34,791)
- **Unknown**: 99.01% —Ä—ã–Ω–∫–æ–≤ (34,446)
- **–ü–µ—Ä–µ—Å—á–∏—Ç–∞–Ω–æ**: —Ç–æ–ª—å–∫–æ 63 –∫–æ—à–µ–ª—å–∫–∞ –∏–∑ 16,052

### –ü—Ä–∏—á–∏–Ω–∞ –ø—Ä–æ–±–ª–µ–º—ã:

1. **–í –æ—á–µ—Ä–µ–¥–∏ —É–∂–µ –±—ã–ª–æ 16,052 –∫–æ—à–µ–ª—å–∫–∞ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `completed`**
   - –í—Å–µ –∫–æ—à–µ–ª—å–∫–∏ —É–∂–µ –±—ã–ª–∏ –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã —Ä–∞–Ω–µ–µ
   - `INSERT OR IGNORE` –Ω–µ –¥–æ–±–∞–≤–ª—è–µ—Ç –∫–æ—à–µ–ª—å–∫–∏, –µ—Å–ª–∏ –æ–Ω–∏ —É–∂–µ –µ—Å—Ç—å –≤ —Ç–∞–±–ª–∏—Ü–µ

2. **–õ–æ–≥–∏–∫–∞ –æ—á–∏—Å—Ç–∫–∏ –±—ã–ª–∞ –Ω–µ–ø–æ–ª–Ω–æ–π**
   - –û—á–∏—â–∞–ª–∏—Å—å —Ç–æ–ª—å–∫–æ `completed`/`failed` jobs
   - –ù–µ –æ—á–∏—â–∞–ª–∏—Å—å `pending`/`processing` jobs
   - –û—á–∏—â–∞–ª–∏—Å—å —Ç–æ–ª—å–∫–æ –∫–æ—à–µ–ª—å–∫–∏ –∏–∑ —Ç–∞–±–ª–∏—Ü—ã `wallets` (63 –∫–æ—à–µ–ª—å–∫–∞), –∞ –Ω–µ –∏–∑ –≤—Å–µ—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤

3. **ML –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ç–æ—Ä –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç**
   - `scikit-learn` –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
   - ML fallback –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –ò–∑–º–µ–Ω–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –æ—á–∏—Å—Ç–∫–∏ jobs
**–ë—ã–ª–æ:**
```python
DELETE FROM wallet_analysis_jobs 
WHERE address IN (SELECT address FROM wallets)
AND status IN ('completed', 'failed')
```

**–°—Ç–∞–ª–æ:**
```python
DELETE FROM wallet_analysis_jobs 
WHERE address IN (
    SELECT DISTINCT address FROM (
        SELECT address FROM wallets
        UNION
        SELECT address FROM wallet_analysis_cache
        UNION
        SELECT address FROM raw_collected_wallets
    )
)
```

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚úÖ –û—á–∏—â–∞—é—Ç—Å—è **–í–°–ï** jobs (–Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Å—Ç–∞—Ç—É—Å–∞)
- ‚úÖ –û—á–∏—â–∞—é—Ç—Å—è –∫–æ—à–µ–ª—å–∫–∏ –∏–∑ **–≤—Å–µ—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤** (wallets, cache, raw_collected)
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è UNION –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤—Å–µ—Ö —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∞–¥—Ä–µ—Å–æ–≤

### 2. –£–¥–∞–ª—ë–Ω –¥—É–±–ª–∏—Ä—É—é—â–∏–π—Å—è –∫–æ–¥
- –£–¥–∞–ª—ë–Ω –∫–æ–¥ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –æ—á–∏—Å—Ç–∫–∏ –ø—Ä–∏ `added_count == 0`
- –¢–µ–ø–µ—Ä—å –æ—á–∏—Å—Ç–∫–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –æ–¥–∏–Ω —Ä–∞–∑ –≤ –Ω–∞—á–∞–ª–µ

## üìã –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å scikit-learn (–¥–ª—è ML –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞)
```bash
pip install scikit-learn
```

### 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–æ–ª–Ω—ã–π –ø–µ—Ä–µ—Å—á—ë—Ç
```bash
python daily_wallet_analysis.py --recompute-all-categories
```

### 3. –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- **–ü–µ—Ä–µ—Å—á–∏—Ç–∞–Ω–æ**: –≤—Å–µ 16,052 –∫–æ—à–µ–ª—å–∫–∞ (–≤–º–µ—Å—Ç–æ 63)
- **–ö–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–æ**: 5-10% —Ä—ã–Ω–∫–æ–≤ (–≤–º–µ—Å—Ç–æ 0.99%)
- **NFL**: +200-500 —Ä—ã–Ω–∫–æ–≤
- **Crypto**: +100-200 —Ä—ã–Ω–∫–æ–≤
- **Macro**: +50-100 —Ä—ã–Ω–∫–æ–≤
- **ML fallback**: +100-300 —Ä—ã–Ω–∫–æ–≤

## üéØ –ò—Ç–æ–≥

–ü—Ä–æ–±–ª–µ–º–∞ –±—ã–ª–∞ –≤ —Ç–æ–º, —á—Ç–æ —Å–∏—Å—Ç–µ–º–∞ –Ω–µ –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–ª–∞ —É–∂–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –∫–æ—à–µ–ª—å–∫–∏. –¢–µ–ø–µ—Ä—å:
- ‚úÖ –û—á–∏—â–∞—é—Ç—Å—è –í–°–ï jobs –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ—Å—á—ë—Ç–æ–º
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤—Å–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –∫–æ—à–µ–ª—å–∫–æ–≤
- ‚úÖ –í—Å–µ –∫–æ—à–µ–ª—å–∫–∏ –±—É–¥—É—Ç –ø–µ—Ä–µ—Å—á–∏—Ç–∞–Ω—ã

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –ø–µ—Ä–µ—Å—á—ë—Ç–∞ —Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º–∏ –æ–∂–∏–¥–∞–µ—Ç—Å—è –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏!

