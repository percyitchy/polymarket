# Инструкция по использованию скрипта поиска адресов кошельков

## Скрипт: `find_wallets_by_condition_id.py`

Скрипт для поиска адресов кошельков из сигнала по `condition_id` рынка.

## Использование

### 1. Поиск по condition_id

```bash
python3 find_wallets_by_condition_id.py <condition_id>
```

**Пример:**
```bash
python3 find_wallets_by_condition_id.py 0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef
```

### 2. Поиск по названию рынка

```bash
python3 find_wallets_by_condition_id.py --search "Warriors Pelicans"
```

**Пример:**
```bash
python3 find_wallets_by_condition_id.py --search "Warriors vs Pelicans"
```

## Что делает скрипт

1. **Получает информацию о рынке** через CLOB API или Data API
2. **Загружает транзакции** для указанного рынка (до 500 транзакций)
3. **Извлекает адреса кошельков** из транзакций
4. **Ищет адреса по паттернам** из сигнала:
   - `0x4e7...823`
   - `0x97e...a30`
   - `0xdb2...56e`
5. **Показывает информацию** о найденных кошельках из базы данных (если есть)
6. **Сохраняет результаты** в файл `wallets_from_signal_YYYYMMDD_HHMMSS.txt`

## Пример вывода

```
======================================================================
ПОИСК АДРЕСОВ КОШЕЛЬКОВ ПО CONDITION_ID
======================================================================

1. Получение информации о рынке...
   Condition ID: 0x1234...
   ✅ Название: Warriors vs Pelicans
   Slug: warriors-pelicans
   Активен: True
   Источник: CLOB

2. Получение транзакций...
   ✅ Получено 150 транзакций через Data API

3. Извлечение адресов кошельков...
   ✅ Найдено 45 уникальных адресов

4. Поиск адресов по паттернам из сигнала...

======================================================================
РЕЗУЛЬТАТЫ ПОИСКА:
======================================================================

✅ 0x4e7...823:
   0x4e748a18a30aeeb9987b463aa491e52fd8d1823
      БД: WR=100.0%, Trades=6, PnL=$1234.56

✅ 0x97e...a30:
   0x97e0e30dd7ef720a85a90b8c79a03a8f91288a30
      БД: WR=100.0%, Trades=9, PnL=$5678.90

✅ 0xdb2...56e:
   0xdb27bf2ac5d428a9c63dbc914611036855a6c56e
      БД: WR=95.0%, Trades=15, PnL=$2345.67

======================================================================
НАЙДЕННЫЕ АДРЕСА КОШЕЛЬКОВ:
======================================================================
1. 0x4e748a18a30aeeb9987b463aa491e52fd8d1823
2. 0x97e0e30dd7ef720a85a90b8c79a03a8f91288a30
3. 0xdb27bf2ac5d428a9c63dbc914611036855a6c56e

✅ Адреса сохранены в файл: wallets_from_signal_20251117_123456.txt
```

## Где найти condition_id

1. **Из URL Polymarket:**
   - Откройте рынок на polymarket.com
   - URL будет вида: `https://polymarket.com/market/warriors-pelicans`
   - `condition_id` можно найти в исходном коде страницы или через DevTools

2. **Из базы данных:**
   ```sql
   SELECT condition_id, sent_at FROM alerts_sent 
   WHERE sent_at LIKE '2025-11-17%' 
   ORDER BY sent_at DESC;
   ```

3. **Из логов бота:**
   ```bash
   grep "Warriors\|Pelicans" polymarket_notifier.log
   ```

## Примечания

- Скрипт ищет до 500 последних транзакций
- Если адреса не найдены, возможно:
  - Транзакции еще не попали в API
  - Рынок закрыт или не существует
  - Это тестовый сигнал
- Найденные адреса автоматически сохраняются в текстовый файл

