# Polymarket Notifier Bot Configuration
# Copy this file to .env and fill in your values

# Telegram Bot Configuration
# Get these from @BotFather on Telegram
TELEGRAM_BOT_TOKEN=your_bot_token_here
TELEGRAM_CHAT_ID=your_chat_id_here
TELEGRAM_REPORTS_CHAT_ID=your_reports_chat_id_here  # Channel for consensus alerts (POLY DAO TEST)
TELEGRAM_REPORTS_CHANNEL_ID=your_reports_channel_id_here  # Separate channel for reports and suppressed alerts (polymarket reports channel)

# Telegram Forum Topics (for size-based routing)
# Use get_topic_ids.py script to find topic IDs from your forum group
# Low Size: alerts with total position < $10,000
# High Size: alerts with total position >= $10,000
# A List: alerts with 2+ A-list traders in the same category
TELEGRAM_LOW_SIZE_TOPIC_ID=your_low_size_topic_id_here
TELEGRAM_HIGH_SIZE_TOPIC_ID=your_high_size_topic_id_here
TELEGRAM_A_LIST_TOPIC_ID=your_a_list_topic_id_here
SIZE_THRESHOLD_USD=10000  # Threshold for Low/High Size routing (default: $10,000)

# Insider Detection Configuration
TELEGRAM_INSIDER_TOPIC_ID=""                      # Optional: Telegram topic ID for insider alerts (suspicious trading patterns). Leave empty to use default reports channel.
INSIDER_MIN_POSITION_SIZE=5000.0                  # Minimum position size in USD to trigger insider detection (default: $5,000). Lower values increase sensitivity.
INSIDER_MAX_TOTAL_TRADES=10                       # Maximum total trades for a wallet to be considered "new" (default: 10). Wallets with fewer trades are monitored more closely.
INSIDER_MIN_WIN_RATE=0.80                         # Minimum win rate (0.0-1.0) to flag as suspicious for new wallets (default: 80%). High win rates on first trades may indicate insider knowledge.
INSIDER_MAX_MARKETS=3                             # Maximum number of unique markets traded to flag as "concentrated" (default: 3). Wallets trading only a few markets with large positions may be insiders.

# Open Interest Monitoring
OI_SPIKE_THRESHOLD_PERCENT=20.0                  # Minimum % increase to trigger OI spike alert (default: 20%)
OI_CHECK_INTERVAL_MIN=5.0                         # How often to check OI in minutes (default: 5 min)
TELEGRAM_OI_SPIKE_TOPIC_ID=                      # Optional: Telegram topic ID for OI spike alerts

# Whale Position Monitoring
WHALE_POSITION_SIZE_USD=10000.0                   # Minimum position size in USD to qualify as whale (default: $10,000)
TELEGRAM_WHALE_POSITION_TOPIC_ID=                # Optional: Telegram topic ID for whale position alerts

# Order Flow Imbalance Detection
ORDER_FLOW_IMBALANCE_THRESHOLD=0.70              # Threshold for detecting imbalance (0.70 = 70% buy or sell)
ORDER_FLOW_TIME_WINDOW_MIN=15.0                  # Time window for order flow analysis in minutes
ORDER_FLOW_CHECK_INTERVAL_MIN=5.0                # How often to check for order flow imbalances in minutes
TELEGRAM_ORDER_FLOW_TOPIC_ID=                    # Optional: Telegram topic ID for order flow alerts

# Monitoring Configuration
POLL_INTERVAL_SEC=7                    # Seconds between wallet checks
ALERT_WINDOW_MIN=20                    # Minutes for consensus window
MIN_CONSENSUS=3                        # Minimum wallets for alert
MIN_TOTAL_POSITION_USD=2000            # Minimum total position size in USDC to send alert
MAX_WALLETS=9000                       # Maximum wallets to track
MAX_PREDICTIONS=1900                   # Maximum trades per wallet

# Startup Configuration
SKIP_STARTUP_COLLECTION=false          # Skip wallet collection at startup (set to true to start monitoring immediately)

# Database Configuration
DB_PATH=polymarket_notifier.db         # SQLite database file path

# Wallet Analysis Queue Configuration
API_MAX_WORKERS=3                      # Maximum parallel analysis workers
API_TIMEOUT_SEC=20                     # API request timeout in seconds
API_RETRY_MAX=6                        # Maximum retry attempts per wallet
API_RETRY_BASE=1.2                     # Exponential backoff base multiplier
ANALYSIS_TTL_MIN=180                   # Analysis job TTL in minutes
INACTIVITY_DAYS=150                    # Days of inactivity threshold for wallet filtering
WIN_RATE_THRESHOLD=0.65                # Minimum win rate to accept wallet (65%)
MAX_DAILY_FREQUENCY=25.0               # Maximum daily trading frequency (max 25 trades per day)
ANALYTICS_LIMIT=5000                   # Maximum addresses to fetch from Polymarket Analytics API

# Wallet Analysis Window
MAX_CLOSED_POSITIONS=250               # Максимум закрытых рынков для анализа (последние по времени)
ANALYSIS_LOOKBACK_DAYS=90              # 3 месяца для фильтра по давности рынков

# New Quality Thresholds for Wallets
MINIMUM_ROI=0.0025                     # Минимум ROI = 0.25% (Total PnL / Total Volume)
MINIMUM_AVG_PNL=150.0                  # Минимум средней прибыли на рынок, $150
MINIMUM_VOLUME=25000.0                 # Минимум суммарного объёма торгов, $25k
MINIMUM_MARKETS=12                     # Минимум закрытых рынков в окне анализа
MINIMUM_AVG_STAKE=100.0                # Минимум средней ставки на рынок, $100

# Trades API Configuration (for future use)
ENABLE_TRADES_API=false                # Enable collection from trades API (set to true when ready)
TRADES_API_MARKETS_LIMIT=100           # Number of markets to process
TRADES_API_TRADES_PER_MARKET=200       # Trades to fetch per market
TRADES_API_TIMEOUT=15                  # Request timeout in seconds
TRADES_API_MAX_RETRIES=3               # Max retry attempts

# Optional: Polymarket API Authentication (for higher rate limits and private endpoints)
# Get these from https://polymarket.com/settings/api-keys
# POLYMARKET_API_KEY=your_api_key_here
# POLYMARKET_SECRET=your_secret_here
# POLYMARKET_PASSPHRASE=your_passphrase_here

# Proxy settings (disabled by default)
# Set ENABLE_PROXIES=true to enable proxy usage
# When disabled, all requests use direct connection regardless of proxy configuration
ENABLE_PROXIES=false

# Optional: Proxy Configuration (for IP rotation to avoid rate limits)
# Format: comma-separated list of proxy URLs
# Examples:
#   HTTP: http://user:pass@proxy1.com:8080,http://user:pass@proxy2.com:8080
#   SOCKS5: socks5://user:pass@proxy1.com:1080,socks5://user:pass@proxy2.com:1080
# Note: Proxies are only used if ENABLE_PROXIES=true
# POLYMARKET_PROXIES=http://pkg-private2:nenbaisd31wsawmw@quality.proxywing.com:8888,http://pkg-private2:nenbaisd31wsawmw@quality.proxywing.com:8888

# Alert Thresholds (for daily_report.py)
ALERT_FAILED_RATE_THRESHOLD=0.05  # 5% - alert if failed rate exceeds this
ALERT_QUEUE_STUCK_THRESHOLD=1000  # Alert if pending > this and 0 completed today
ALERT_QUEUE_SLOW_THRESHOLD=500    # Alert if pending > this and processing too slow
ALERT_MIN_JOBS_PER_HOUR=20.0      # Minimum jobs/hour to avoid "slow queue" alert

# HashiDive API Configuration (optional, for fallback trades and wallet discovery)
# Get API key from https://hashdive.com
# HASHDIVE_API_KEY=your_hashdive_api_key_here
# ENABLE_HASHDIVE_WHALES=false  # Enable collection from HashiDive whale trades (default: false)
# ENABLE_HASHDIVE_TRADER_EXPLORER=false  # Enable scraping from HashiDive Trader Explorer page (default: false, requires Playwright)
# HASHDIVE_TRADER_EXPLORER_MAX_PAGES=100  # Maximum pages to scrape from Trader Explorer (default: 100, set to None for all pages)
# Note: HashiDive provides 1000 credits/month. Used for:
#   - Fallback when Polymarket API fails (get_trades)
#   - Whale wallet discovery (get_latest_whale_trades) - requires ENABLE_HASHDIVE_WHALES=true
#   - Trader Explorer scraping (https://hashdive.com/Trader_explorer) - requires ENABLE_HASHDIVE_TRADER_EXPLORER=true
#   - Market price verification (get_last_price)

# Polymarket CLOB API Configuration (for authenticated price requests via /price endpoint)
# Get API credentials from Polymarket account settings (https://polymarket.com/settings/api-keys)
# PM_API_KEY=your_polymarket_api_key_here
# PM_API_SECRET=your_polymarket_api_secret_here
# PM_API_PASSPHRASE=your_polymarket_api_passphrase_here

# FinFeed API Configuration (optional, for price fallback)
# Get API key from FinFeed (if available)
# FINFEED_API_KEY=your_finfeed_api_key_here

# Adjacent News API Configuration (optional, for semantic search, market listings, trade data, and news correlation)
# Get API key from adj.news website (if available)
# Free tier: 300 req/min unauthenticated, 1000 req/min authenticated
# ADJ_NEWS_API_KEY=your_adj_news_api_key_here  # Optional: For Adjacent News API (adj.news). Free tier: 300 req/min, Authenticated: 1000 req/min. Format: any string

# Optional: Advanced Configuration
# LEADERBOARD_URLS=https://polymarket.com/leaderboard/overall/monthly/profit,https://polymarket.com/leaderboard/overall/weekly/profit
# ENABLE_ALLTIME_VOLUME_LEADERBOARD=false  # Enable problematic all/volume leaderboard (default: false, known to timeout)
# DATA_API_TIMEOUT=20
# RETRY_ATTEMPTS=3
# LOG_LEVEL=INFO
