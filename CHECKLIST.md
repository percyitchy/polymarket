# ‚úÖ –§–∏–Ω–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–π —á–µ–∫–ª–∏—Å—Ç –¥–ª—è Polymarket Notifier

## ‚úÖ –ü—Ä–æ–±–ª–µ–º–∞ ‚Ññ1 ‚Äî –±–æ—Ç –Ω–∞—Ö–æ–¥–∏—Ç –º–∞–ª–æ –∫–æ—à–µ–ª—å–∫–æ–≤ - –†–ï–®–ï–ù–ê

### ‚úÖ –°–∏—Å—Ç–µ–º–∞ –æ—á–µ—Ä–µ–¥–∏ –∑–∞–¥–∞—á
- ‚úÖ –¢–∞–±–ª–∏—Ü–∞ `wallet_analysis_jobs` —Å–æ–∑–¥–∞–Ω–∞ –≤ SQLite
- ‚úÖ –ö–∞–∂–¥—ã–π –Ω–∞–π–¥–µ–Ω–Ω—ã–π –∫–æ—à–µ–ª—ë–∫ –ø–æ–ø–∞–¥–∞–µ—Ç –≤ –æ—á–µ—Ä–µ–¥—å, –∞ –Ω–µ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è —Å—Ä–∞–∑—É
- ‚úÖ Analysis worker –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∫–æ—à–µ–ª—å–∫–∏ –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ (max 3 –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ)
- ‚úÖ Retry —Å exponential backoff + jitter —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ 429 –∏ Retry-After –¥–æ–±–∞–≤–ª–µ–Ω–∞
- ‚úÖ –ï—Å–ª–∏ –∞–Ω–∞–ª–∏–∑ –Ω–µ —É–¥–∞–ª—Å—è ‚Äî –∫–æ—à–µ–ª—ë–∫ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ –æ—á–µ—Ä–µ–¥—å
- ‚úÖ –ï—Å–ª–∏ –∞–Ω–∞–ª–∏–∑ —É–¥–∞–ª—Å—è ‚Äî —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ wallets –∏ —É–±–∏—Ä–∞–µ—Ç—Å—è –∏–∑ –æ—á–µ—Ä–µ–¥–∏
- ‚úÖ –ï—Å–ª–∏ API –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω ‚Äî –∫–æ—à–µ–ª—ë–∫ –ù–ï —É–¥–∞–ª—è–µ—Ç—Å—è, –∞ –æ—Ç–∫–ª–∞–¥—ã–≤–∞–µ—Ç—Å—è

### ‚úÖ –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –æ—á–µ—Ä–µ–¥–∏
- ‚úÖ API_MAX_WORKERS=3
- ‚úÖ API_TIMEOUT_SEC=20
- ‚úÖ API_RETRY_MAX=6
- ‚úÖ API_RETRY_BASE=1.2
- ‚úÖ ANALYSIS_TTL_MIN=180

## ‚úÖ –ü—Ä–æ–±–ª–µ–º–∞ ‚Ññ2 ‚Äî –Ω–µ—Ç –Ω–∞–¥—ë–∂–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–æ—à–µ–ª—å–∫–æ–≤ - –†–ï–®–ï–ù–ê

### ‚úÖ SQLite —Å WAL —Ä–µ–∂–∏–º–æ–º
- ‚úÖ WAL —Ä–µ–∂–∏–º –≤–∫–ª—é—á–µ–Ω (PRAGMA journal_mode=WAL)
- ‚úÖ –í—Å–µ –≤–∞–∂–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–Ω—ã:
  - ‚úÖ `wallets` ‚Äî —Ñ–∏–Ω–∞–ª—å–Ω–∞—è –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω–∞—è –±–∞–∑–∞ –ª—É—á—à–∏—Ö –∫–æ—à–µ–ª—å–∫–æ–≤
  - ‚úÖ `wallet_analysis_jobs` ‚Äî –æ—á–µ—Ä–µ–¥—å –Ω–∞ –∞–Ω–∞–ª–∏–∑
  - ‚úÖ `wallet_analysis_cache` ‚Äî –∫—ç—à —É—Å–ø–µ—à–Ω–æ –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö
  - ‚úÖ `last_trades` ‚Äî –ø—Ä–æ–≥—Ä–µ—Å—Å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
  - ‚úÖ `alerts_sent` ‚Äî –∞–Ω—Ç–∏—Å–ø–∞–º
  - ‚úÖ `rolling_buys` ‚Äî –æ–∫–Ω–æ –∫–æ–Ω—Å–µ–Ω—Å—É—Å–∞

### ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–∞–π–ø–ª–∞–π–Ω
- ‚úÖ –ü–∞—Ä—Å–µ—Ä –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å—ã—Ä—ã–µ –∞–¥—Ä–µ—Å–∞ –≤ –æ—á–µ—Ä–µ–¥—å
- ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å —Ç–∞–±–ª–∏—Ü–µ–π wallets

## ‚úÖ –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∞–Ω–∞–ª–∏–∑–∞ –∫–æ—à–µ–ª—å–∫–æ–≤ - –ì–û–¢–û–í–ê

### ‚úÖ –í–æ—Ä–∫–µ—Ä –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–æ—à–µ–ª—å–∫–∞:
- ‚úÖ –í—ã–∑—ã–≤–∞–µ—Ç /traded
- ‚úÖ –í—ã–∑—ã–≤–∞–µ—Ç /closed-positions
- ‚úÖ –í—ã—á–∏—Å–ª—è–µ—Ç win-rate
- ‚úÖ –ï—Å–ª–∏ traded >= 50 and win_rate > 0.65 ‚Üí —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ wallets
- ‚úÖ –ò–Ω–∞—á–µ ‚Äî –ø–æ–º–µ—á–∞–µ—Ç –∫–∞–∫ –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤ –∫—ç—à–µ
- ‚úÖ –í—Å–µ–≥–¥–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Å http_get_resilient() —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π 429

## ‚úÖ –ü–æ–≤–µ–¥–µ–Ω–∏–µ –±–æ—Ç–∞ –ø–æ—Å–ª–µ —É–ª—É—á—à–µ–Ω–∏–π - –†–ï–ê–õ–ò–ó–û–í–ê–ù–û

| –ó–∞–¥–∞—á–∞ | –ì–¥–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è | –°—Ç–∞—Ç—É—Å |
|--------|----------------|--------|
| –ü–∞—Ä—Å–∏–Ω–≥ –ª–∏–¥–µ—Ä–æ–≤ | fetch_leaderboards ‚Üí enqueue_wallet() | ‚úÖ |
| –ê–Ω–∞–ª–∏–∑ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è | analysis_worker_loop() | ‚úÖ |
| –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ | –∫–∞–∫ —Ä–∞–Ω—å—à–µ | ‚úÖ |
| –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è | –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π, —Ç–æ–ª—å–∫–æ –±–æ–ª—å—à–µ –∫–æ—à–µ–ª—å–∫–æ–≤ | ‚úÖ |

## ‚úÖ Heartbeat –ª–æ–≥ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥ - –†–ï–ê–õ–ò–ó–û–í–ê–ù

### ‚úÖ –§–æ—Ä–º–∞—Ç —Å—Ç—Ä–æ–∫–∏:
```
[HB] queue=447 analyzed=129 wallets=74 time=2025-01-01T12:01:33Z
```

## ‚úÖ –ò—Ç–æ–≥–æ–≤–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ - –î–û–°–¢–ò–ì–ù–£–¢–û

- ‚úÖ –ë–æ—Ç –¥–æ–ª–∂–µ–Ω –Ω–∞—Ö–æ–¥–∏—Ç—å –¥–µ—Å—è—Ç–∫–∏‚Äì—Å–æ—Ç–Ω–∏ –∫–æ—à–µ–ª—å–∫–æ–≤, –∞ –Ω–µ 2‚Äì3
- ‚úÖ –ë–æ—Ç –¥–æ–ª–∂–µ–Ω –¥–æ–≤–æ–¥–∏—Ç—å –≤—Å–µ –¥–æ –∞–Ω–∞–ª–∏–∑–∞, –¥–∞–∂–µ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö —Å–µ—Ç–∏
- ‚úÖ –ë–æ—Ç –ù–ï —Ç–µ—Ä—è–µ—Ç –∫–æ—à–µ–ª—å–∫–∏
- ‚úÖ –ë–æ—Ç –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –∏ —Å–ª–∞—Ç—å —Å–∏–≥–Ω–∞–ª—ã

## ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞

| –§–∞–π–ª | –î–µ–π—Å—Ç–≤–∏–µ | –°—Ç–∞—Ç—É—Å |
|------|----------|--------|
| `db.py` | –¥–æ–±–∞–≤–ª–µ–Ω—ã –æ—á–µ—Ä–µ–¥–∏ –∏ –∫—ç—à, —Å–æ–∑–¥–∞–Ω—ã —Ç–∞–±–ª–∏—Ü—ã | ‚úÖ |
| `polymarket_notifier.py` | –¥–æ–±–∞–≤–ª–µ–Ω analysis worker, heartbeat, resilient http, enqueue –≤–º–µ—Å—Ç–æ –ø—Ä—è–º–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ | ‚úÖ |
| `notify.py` | –æ—Å—Ç–∞–≤–ª–µ–Ω –∫–∞–∫ –µ—Å—Ç—å | ‚úÖ |
| `fetch_leaderboards*.py` | –≤–º–µ—Å—Ç–æ –∞–Ω–∞–ª–∏–∑–∞ ‚Üí —Ç–æ–ª—å–∫–æ enqueue | ‚úÖ |
| `wallet_analyzer.py` | –Ω–æ–≤—ã–π —Ñ–∞–π–ª —Å —Å–∏—Å—Ç–µ–º–æ–π –æ—á–µ—Ä–µ–¥–∏ | ‚úÖ |

## ‚úÖ –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

- ‚úÖ –ü—Ä–æ–µ–∫—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π: `python3 polymarket_notifier.py`

## ‚úÖ –§–∏–Ω–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–π —á–µ–∫–ª–∏—Å—Ç

- ‚úÖ –û—á–µ—Ä–µ–¥—å —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –µ—Å—Ç—å
- ‚úÖ 429/timeout –Ω–µ –ª–æ–º–∞—é—Ç –ø–∞–π–ø–ª–∞–π–Ω
- ‚úÖ WAL –±–∞–∑–∞ —Å–æ–∑–¥–∞—ë—Ç—Å—è
- ‚úÖ –ê–Ω–∞–ª–∏–∑ –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –º–æ–Ω–∏—Ç–æ—Ä
- ‚úÖ –õ–æ–≥ Heartbeat –µ—Å—Ç—å
- ‚úÖ –ë–æ—Ç –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –ø—Ä–∏—Å—ã–ª–∞—Ç—å —Å–∏–≥–Ω–∞–ª—ã

## üéâ –†–ï–ó–£–õ–¨–¢–ê–¢

**–í—Å–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω—ã! –ë–æ—Ç —Ç–µ–ø–µ—Ä—å:**
1. **–ù–∞—Ö–æ–¥–∏—Ç —Å–æ—Ç–Ω–∏ –∫–æ—à–µ–ª—å–∫–æ–≤** –≤–º–µ—Å—Ç–æ 2-3
2. **–ù–µ —Ç–µ—Ä—è–µ—Ç –∫–æ—à–µ–ª—å–∫–∏** –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö API
3. **–ù–∞–¥–µ–∂–Ω–æ —Ö—Ä–∞–Ω–∏—Ç –¥–∞–Ω–Ω—ã–µ** –≤ WAL SQLite
4. **–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å** —á–µ—Ä–µ–∑ heartbeat –ª–æ–≥–∏
5. **–ü—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å** –¥–∞–∂–µ –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å —Å–µ—Ç—å—é

**–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É!** üöÄ
